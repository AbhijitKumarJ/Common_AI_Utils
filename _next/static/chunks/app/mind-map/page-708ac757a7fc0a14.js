(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[112],{1056:function(e,t,n){Promise.resolve().then(n.bind(n,4981))},4981:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n(7437),r=n(2265),s=n(7138),o=n(357);function i(e){let{setMindMap:t,setLogs:n}=e,[s,i]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(3),h=async e=>{let t=window.backendAvailable,a=window.openRouterApiKey;if(!t&&!a)throw Error("API key is required when backend is not available");let r=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:"Bearer ".concat(t?o.env.NEXT_PUBLIC_OPENROUTER_API_KEY:a),"Content-Type":"application/json","HTTP-Referer":"https://localhost","X-Title":"General Purpose AI Utilities"},body:JSON.stringify({model:"meta-llama/llama-3.1-8b-instruct:free",messages:[{role:"user",content:e}]})});if(!r.ok)throw Error("Failed to fetch response from API");let s=await r.json();return n(t=>[...t,{request:e,response:s}]),s.choices[0].message.content},f=async()=>{c(!0);try{let e="Given the following text, determine a central topic:\n\n".concat(s,"\n\nRespond with only the central topic."),n=await h(e),a='Given the central topic "'.concat(n,'" and the following text, determine up to ').concat(d," main topics:\n\n").concat(s,"\n\nRespond with a JSON array of main topics where each main topic is a string. Stricltly follow the JSON array format and nothing else.Don't output any additional characters outside of the JSON array."),r=await h(a),o=JSON.parse(r),i={[n]:{}};for(let e of o){let t='Given the main topic "'.concat(e,'" in the context of "').concat(n,'", determine up to ').concat(d," subtopics based on the following text:\n\n").concat(s,"\n\nRespond with a JSON array of subtopics where each subtopic is a string. Stricltly follow the JSON array format and nothing else.Don't output any additional characters outside of the JSON array."),a=await h(t),r=JSON.parse(a);i[n][e]=r.reduce((e,t)=>({...e,[t]:{}}),{})}t(i)}catch(e){console.error("Error generating mind map:",e)}finally{c(!1)}};return(0,a.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,a.jsx)("textarea",{className:"w-full p-3 bg-gray-800 border border-gray-700 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",rows:5,value:s,onChange:e=>i(e.target.value),placeholder:"Enter your text here..."}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"Max Subtopics:"}),(0,a.jsx)("input",{type:"number",min:"1",max:"5",value:d,onChange:e=>u(parseInt(e.target.value)),className:"w-16 p-2 bg-gray-800 border border-gray-700 rounded-md"})]}),(0,a.jsx)("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:f,disabled:l,children:l?"Generating...":"Generate Mind Map"})]})]})}var l=n(1117);function c(e){let{mindMap:t,onClose:n}=e,s=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!s.current||!t)return;let e=Math.min(800,window.innerWidth-40),n=Math.min(600,window.innerHeight-100),a=l.Ys(s.current).attr("width",e).attr("height",n).call(l.sPX().on("zoom",e=>{r.attr("transform",e.transform)}));a.selectAll("*").remove();let r=a.append("g"),o=[],i=[],c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object.entries(e).forEach(e=>{let[a,r]=e;o.push({id:a,group:n,level:n+1}),t&&i.push({source:t,target:a,value:1}),"object"==typeof r&&null!==r&&c(r,a,n+1)})};c(t);let d=l.A4v(o).force("link",l.Fsl(i).id(e=>e.id).distance(100)).force("charge",l.q5i().strength(-300)).force("center",l.wqt(e/2,n/2)),u=r.append("g").selectAll("line").data(i).join("line").attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",e=>Math.sqrt(e.value)),h=r.append("g").selectAll("circle").data(o).join("circle").attr("r",5).attr("fill",e=>l.Cn1[e.group%10]),f=r.append("g").selectAll("text").data(o).join("text").text(e=>"".concat(e.level,". ").concat(e.id)).attr("font-size",10).attr("dx",8).attr("dy",3).attr("fill","white");d.on("tick",()=>{u.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),h.attr("cx",e=>e.x).attr("cy",e=>e.y),f.attr("x",e=>e.x).attr("y",e=>e.y)}),h.call(l.ohM().on("start",function(e,t){e.active||d.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}).on("drag",function(e,t){t.fx=e.x,t.fy=e.y}).on("end",function(e,t){e.active||d.alphaTarget(0),t.fx=null,t.fy=null}))},[t]),(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center overflow-auto",children:(0,a.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",style:{maxHeight:"calc(100vh - 40px)"},children:[(0,a.jsx)("button",{className:"mb-4 px-2 py-1 bg-red-600 text-white rounded",onClick:n,children:"Close"}),(0,a.jsx)("svg",{ref:s})]})})}function d(e){let{mindMap:t}=e,[n,s]=(0,r.useState)(["Central Topic"]),[o,i]=(0,r.useState)(!1),l=e=>{s(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},d=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=n.includes(e),o="object"==typeof t&&Object.keys(t).length>0;return(0,a.jsxs)("div",{style:{marginLeft:"".concat(20*r,"px")},className:"my-2",children:[(0,a.jsxs)("span",{className:"cursor-pointer text-gray-300 hover:text-indigo-400",onClick:()=>o&&l(e),children:[o&&(s?"▼ ":"► "),e]}),s&&o&&(0,a.jsx)("div",{className:"ml-4",children:Object.entries(t).map(e=>{let[t,n]=e;return d(t,n,r+1)})})]},e)};return(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Generated Mind Map"}),(0,a.jsx)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-inner",children:d(Object.keys(t)[0],t[Object.keys(t)[0]])}),(0,a.jsxs)("div",{className:"mt-4 space-x-4",children:[(0,a.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:()=>{let e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2)),n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download","mind_map.json"),document.body.appendChild(n),n.click(),n.remove()},children:"Export JSON"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>i(!0),children:"Show Visualization"})]}),o&&(0,a.jsx)(c,{mindMap:t,onClose:()=>i(!1)})]})}function u(){let[e,t]=(0,r.useState)(null),[n,o]=(0,r.useState)([]);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"Mind Map Generator"}),(0,a.jsx)(s.default,{href:"/",children:(0,a.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Return to Dashboard"})})]}),(0,a.jsx)(i,{setMindMap:t,setLogs:o}),e&&(0,a.jsx)(d,{mindMap:e}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"API Logs"}),n.map((e,t)=>(0,a.jsxs)("div",{className:"mb-4 bg-gray-800 p-4 rounded-lg",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold mb-2",children:["Request ",t+1]}),(0,a.jsx)("pre",{className:"bg-gray-700 p-2 rounded mb-2 overflow-x-auto",children:JSON.stringify(e.request,null,2)}),(0,a.jsxs)("h3",{className:"text-xl font-semibold mb-2",children:["Response ",t+1]}),(0,a.jsx)("pre",{className:"bg-gray-700 p-2 rounded overflow-x-auto",children:JSON.stringify(e.response,null,2)})]},t))]})]})}}},function(e){e.O(0,[231,476,971,23,744],function(){return e(e.s=1056)}),_N_E=e.O()}]);